import { Request, Response, Dictionary } from 'express-serve-static-core';

/**
 * A type alias to add local as a property to the normal Express Request.
 */
export type ResourceRequest = Request<Dictionary<string>> & { local: unknown }

/**
 * Used to support either async or sync return types
 */
export type ResourceHandlerReturn = void | Promise<void>;

/**
 * Interface for all middleware used by the resource generator project. This type definition matches what express
 * expects for middleware.
 * 
 * The ResourceRequest type only serves to add 'local' property to the normal express Request type @ResourceRequest
 * for more details.
 * 
 * By convention if you need to pass data between middleware please use the @property local to do this. These can also
 * be exposed to the routes generated by the resource via the @local parameter decorator @see local parameter decorator
 * for more details.
 * 
 */
export interface ResourceHandler {
  (req: ResourceRequest, res: Response, next: unknown): ResourceHandlerReturn;
}